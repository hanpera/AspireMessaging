@page "/"
@using AspireMessaging.Web.Services

@rendermode InteractiveServer

@inject IBus Bus
@inject HelloService HelloService;

<PageTitle>Home</PageTitle>

<h1>Hello, world!</h1>

Welcome to your new app.

<button class="btn btn-primary mt-4" @onclick="DispatchMessage">Publish Hello, world!</button>

@code {
    private async Task DispatchMessage()
    {
        var client = HelloService.Client;
        await Bus.Publish(new MessageContract
        {
            Message = "Hello, world!"
        });
    }
}
